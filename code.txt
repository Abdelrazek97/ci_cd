Here you go, Karim â€” a clean, simple, fully working Mini CI/CD Pipeline Simulator in Python that covers all required steps âœ…âœ…âœ…

This is perfect for a DevOps presentation because it uses:
âœ” subprocess (Git pull)
âœ” unittest (run tests)
âœ” zipfile or shutil (package)
âœ” deploy to /deploy folder
âœ” logging with timestamps
âœ” optional: send webhook notification


---

âœ… Folder Structure (recommended)

project/
â”‚
â”œâ”€â”€ main.py               # Your CI/CD pipeline script
â”œâ”€â”€ app/                  # Sample code
â”‚   â””â”€â”€ hello.py
â””â”€â”€ tests/
    â””â”€â”€ test_hello.py


---

âœ… Example Files

app/hello.py

def add(a, b):
    return a + b


---

tests/test_hello.py

import unittest
from app.hello import add

class TestHello(unittest.TestCase):
    def test_add(self):
        self.assertEqual(add(2, 3), 5)

if __name__ == "__main__":
    unittest.main()


---

âœ… â­ Full CI/CD Pipeline Script (main.py)

This script is copy-paste ready, works on Linux, and covers everything in the assignment.

import subprocess
import unittest
import zipfile
import shutil
import os
import datetime
import requests

# ------------------------
# Helper: timestamped logs
# ------------------------
def log(msg):
    timestamp = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    print(f"[{timestamp}] {msg}")

# ------------------------
# 1. Pull latest code
# ------------------------
def pull_code(repo_path="."):
    log("Pulling latest code from Git...")
    try:
        subprocess.run(["git", "-C", repo_path, "pull"], check=True)
        log("âœ… Git pull successful.")
        return True
    except subprocess.CalledProcessError:
        log("âŒ Git pull failed.")
        return False

# ------------------------
# 2. Run unit tests
# ------------------------
def run_tests():
    log("Running unit tests...")
    try:
        result = subprocess.run(["python3", "-m", "unittest", "discover", "-s", "tests"], check=True)
        log("âœ… All tests passed.")
        return True
    except subprocess.CalledProcessError:
        log("âŒ Tests failed.")
        return False

# ------------------------
# 3. Package code as ZIP
# ------------------------
def package_code(output_zip="build.zip"):
    log("Packaging code...")
    with zipfile.ZipFile(output_zip, "w") as zipf:
        for root, dirs, files in os.walk("app"):
            for file in files:
                filepath = os.path.join(root, file)
                zipf.write(filepath)
    log(f"âœ… Code packaged into {output_zip}")
    return output_zip

# ------------------------
# 4. Deploy to folder
# ------------------------
def deploy(package, deploy_path="deploy"):
    log("Deploying package...")
    os.makedirs(deploy_path, exist_ok=True)

    dest = os.path.join(deploy_path, os.path.basename(package))
    shutil.copy(package, dest)

    log(f"âœ… Deployed to {deploy_path}")
    return dest

# ------------------------
# 5. Optional: Send Webhook
# ------------------------
def send_notification(text="Deployment Completed"):
    try:
        # Example: Discord webhook
        url = "https://your-webhook-url-here"
        payload = {"content": text}
        requests.post(url, json=payload)
        log("âœ… Notification sent.")
    except:
        log("âš ï¸ Notification failed (optional).")

# ------------------------
# Main Pipeline
# ------------------------
def pipeline():
    log("ğŸš€ Starting CI/CD Pipeline...")

    if not pull_code():
        return log("Pipeline stopped.")

    if not run_tests():
        return log("Pipeline stopped.")

    package = package_code()
    deployed_file = deploy(package)

    send_notification("âœ… Deployment successful!")

    log("ğŸ‰ CI/CD Pipeline completed successfully!")

# ------------------------
# Run
# ------------------------
if __name__ == "__main__":
    pipeline()


---

âœ… What this script includes

Step	Feature	Status

1	Pull code using subprocess	âœ…
2	Run unit tests using unittest	âœ…
3	Package code using zipfile	âœ…
4	Deploy to /deploy folder	âœ…
5	Timestamped logs	âœ…
6	Optional notification	âœ…



---

âœ… How to Run It

python3 main.py


---